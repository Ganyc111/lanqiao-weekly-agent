app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: åˆ›å»ºæ–°å‘¨æŠ¥ï¼ˆé›†æˆï¼‰
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai_api_compatible:0.0.27@f9ce3ff5e28f09931a3a7fca59add2d09590408f7e9a3d701b10c77a60249719
    version: null
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/tongyi:0.1.13@10cbfe851fdf27f3c50ca2ca86293eb0c27da51ee74e58acebafd92b71c8d518
    version: null
kind: app
version: 0.5.0
workflow:
  conversation_variables:
  - description: å¾€æœŸå‘¨æŠ¥ä¸‹å‘¨è®¡åˆ’
    id: 9793321e-e831-4b57-a0ee-0b0a9ca5450a
    name: old_plan
    selector:
    - conversation
    - old_plan
    value: ''
    value_type: string
  - description: å¾€æœŸå‘¨æŠ¥è§£å†³æ–¹æ¡ˆ
    id: 38221f63-4e1b-483d-bf07-74c27806d995
    name: old_solution
    selector:
    - conversation
    - old_solution
    value: ''
    value_type: string
  - description: å¾€æœŸå‘¨æŠ¥æ‰€é‡é—®é¢˜
    id: ceb9cd63-8128-4f16-9706-0d73ae2eaf5b
    name: old_issues
    selector:
    - conversation
    - old_issues
    value: ''
    value_type: string
  - description: å¾€æœŸå‘¨æŠ¥çš„æ—¥æœŸèŒƒå›´
    id: 69bf421a-b52f-45f3-b84e-7db2236ab4af
    name: target_week
    selector:
    - conversation
    - target_week
    value: ''
    value_type: string
  - description: å¾€æœŸå‘¨æŠ¥æ€»ç»“
    id: e17fa5d1-ace6-4ba2-b305-e5fe55aa5794
    name: old_summary
    selector:
    - conversation
    - old_summary
    value: ''
    value_type: string
  - description: å¾€æœŸå‘¨æŠ¥çš„ç¼–å·
    id: 776cbc08-f7cc-405a-b975-1f7b44da9b6e
    name: target_report_id
    selector:
    - conversation
    - target_report_id
    value: ''
    value_type: string
  - description: å¾€æœŸå‘¨æŠ¥åˆ—è¡¨
    id: c612712b-d6c9-4d71-bc91-1786ace53f7f
    name: temp_report_list
    selector:
    - conversation
    - temp_report_list
    value: ''
    value_type: string
  - description: åŸå§‹å‘¨æŠ¥å‘¨æœŸ
    id: 4ed0f0d1-74f3-4fd5-b5a3-fa1f1a26adc0
    name: week_detail
    selector:
    - conversation
    - week_detail
    value: ''
    value_type: string
  - description: æå–çš„ç”¨æˆ·çš„å­¦ä¹ å†…å®¹ï¼ˆæ— åˆ™ä¸ºç©ºï¼‰
    id: 5b3b5747-77f9-4238-bf51-10f476d0ec15
    name: user_content
    selector:
    - conversation
    - user_content
    value: ''
    value_type: string
  - description: ç”¨æˆ·çš„æ„å›¾
    id: 33d7703a-c7e0-4de1-9e61-57221e51309e
    name: user_intent
    selector:
    - conversation
    - user_intent
    value: ''
    value_type: string
  - description: bindäº‘è¯¾idå­˜å‚¨
    id: c574babe-dd80-4d67-b656-45418804e963
    name: new_bind_ids
    selector:
    - conversation
    - new_bind_ids
    value: ''
    value_type: string
  - description: è¯¾ç¨‹åå­˜å‚¨
    id: 166da469-5ad8-485b-98a1-53c03cbf6ad9
    name: new_name
    selector:
    - conversation
    - new_name
    value: ''
    value_type: string
  - description: äº‘è¯¾idå­˜å‚¨
    id: 0bf63e6f-5076-452a-a4b8-ac45c196971e
    name: new_yk_ids
    selector:
    - conversation
    - new_yk_ids
    value: ''
    value_type: string
  - description: è¯¾ç¨‹æ¸…æ´—åçš„å˜é‡
    id: 94984f9a-fc7d-4a25-8e08-3a4c6826086d
    name: temp_course_list
    selector:
    - conversation
    - temp_course_list
    value: ''
    value_type: string
  - description: å½“å‰å¯¹è¯æ‰€å¤„çš„æ­¥éª¤çŠ¶æ€ (normal, selecting_course)
    id: b21b2056-32c9-4849-a8d5-c858e0859647
    name: current_step
    selector:
    - conversation
    - current_step
    value: normal
    value_type: string
  - description: ç”¨æˆ·çš„cookie
    id: 7d02372a-2225-4089-91b2-867ad2507b7c
    name: cookie
    selector:
    - conversation
    - cookie
    value: ''
    value_type: string
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: 'ğŸ‘‹ æ‚¨å¥½ï¼æˆ‘æ˜¯ä¸œç§‘è“æ¡¥ ä¸“å±å‘¨æŠ¥åŠ©æ‰‹ã€‚

      æˆ‘å·²ç»å‡†å¤‡å¥½ä¸ºæ‚¨å¤„ç†ç¹ççš„å‘¨æŠ¥æäº¤ä»»åŠ¡ã€‚


      âš ï¸ **é‡è¦æç¤ºï¼šæœ¬ç³»ç»Ÿä»…æ”¯æŒã€ä¸œç§‘è“æ¡¥ã€‘è´¦å·ä½¿ç”¨ã€‚**


      âœ¨ **æˆ‘èƒ½å¬æ‡‚è¿™ä¸‰ç§æŒ‡ä»¤ï¼ˆæ¨èå¤åˆ¶ä½¿ç”¨ï¼‰ï¼š**


      1ï¸âƒ£ **æé€Ÿæ–°å»ºï¼ˆå¼ºçƒˆæ¨è ğŸ”¥ï¼‰**

      æŒ‡ä»¤æ ¼å¼ï¼šâ€œæ–°å»ºå‘¨æŠ¥ï¼Œæœ¬å‘¨å­¦äº† [å†…å®¹]â€

      ğŸ‘‰ *ç¤ºä¾‹ï¼šâ€œæ–°å»ºå‘¨æŠ¥ï¼Œè¿™å‘¨æˆ‘å­¦ä¹ äº† Java çš„å¤šçº¿ç¨‹å’Œ IO æµã€‚â€*

      *(æˆ‘ä¼šè‡ªåŠ¨ä¸ºæ‚¨åŒ¹é…è¯¾ç¨‹ã€ç”Ÿæˆå†…å®¹å¹¶æäº¤ï¼Œä¸€æ­¥åˆ°ä½ï¼)*


      2ï¸âƒ£ **æ™®é€šæ–°å»º**

      æŒ‡ä»¤æ ¼å¼ï¼šâ€œæ–°å»ºå‘¨æŠ¥â€

      ğŸ‘‰ *ç¤ºä¾‹ï¼šâ€œæ–°å»ºå‘¨æŠ¥â€*

      *(æˆ‘ä¼šä¸€æ­¥æ­¥å¼•å¯¼æ‚¨é€‰æ‹©å‘¨æœŸã€è¯¾ç¨‹å¹¶è¡¥å……å†…å®¹ã€‚)*


      3ï¸âƒ£ **æ›´æ–°å¾€æœŸ**

      æŒ‡ä»¤æ ¼å¼ï¼šâ€œæˆ‘è¦æ›´æ–°å‘¨æŠ¥â€

      ğŸ‘‰ *ç¤ºä¾‹ï¼šâ€œæ›´æ–°å‘¨æŠ¥â€*

      *(æˆ‘ä¼šå…ˆåˆ—å‡ºæ‚¨å·²æäº¤çš„è®°å½•ï¼Œä¾›æ‚¨é€‰æ‹©åå†è¿›è¡Œä¿®æ”¹ã€‚)*


      ---

      ğŸ’¡ **æç¤º**ï¼šç³»ç»Ÿå°†è‡ªåŠ¨ä½¿ç”¨æ‚¨å¡«å†™çš„è´¦å·è¿›è¡Œç™»å½•è¯·æ‚¨åŠ¡å¿…å¡«å†™æ‚¨çš„è“æ¡¥è´¦å·å’Œå¯†ç ã€‚è¯·ç›´æ¥åœ¨ä¸‹æ–¹è¾“å…¥æŒ‡ä»¤å¼€å§‹ ğŸ‘‡'
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
    - æ–°å»ºå‘¨æŠ¥
    - æ›´æ–°å‘¨æŠ¥
    suggested_questions_after_answer:
      enabled: true
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 1764415216045-source-1764415493687-target
      selected: false
      source: '1764415216045'
      sourceHandle: source
      target: '1764415493687'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: 1764415493687-source-1764415689772-target
      selected: false
      source: '1764415493687'
      sourceHandle: source
      target: '1764415689772'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: answer
      id: 1764415216045-fail-branch-1764422105750-target
      selected: false
      source: '1764415216045'
      sourceHandle: fail-branch
      target: '1764422105750'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: assigner
      id: 1764415689772-source-1764422617445-target
      selected: false
      source: '1764415689772'
      sourceHandle: source
      target: '1764422617445'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: assigner
        targetType: llm
      id: 1764422617445-source-1764423524293-target
      selected: false
      source: '1764422617445'
      sourceHandle: source
      target: '1764423524293'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: if-else
      id: 1764423524293-source-1764425644544-target
      selected: false
      source: '1764423524293'
      sourceHandle: source
      target: '1764425644544'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: http-request
      id: 1764425644544-true-1764426599423-target
      selected: false
      source: '1764425644544'
      sourceHandle: 'true'
      target: '1764426599423'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 1764426599423-source-1764426731997-target
      selected: false
      source: '1764426599423'
      sourceHandle: source
      target: '1764426731997'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: if-else
      id: 1764426731997-source-1764428307690-target
      selected: false
      source: '1764426731997'
      sourceHandle: source
      target: '1764428307690'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: answer
      id: 1764428307690-true-1764428752191-target
      selected: false
      source: '1764428307690'
      sourceHandle: 'true'
      target: '1764428752191'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 1764428957932-source-1764430081871-target
      selected: false
      source: '1764428957932'
      sourceHandle: source
      target: '1764430081871'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: assigner
      id: 1764430081871-source-1764434698944-target
      selected: false
      source: '1764430081871'
      sourceHandle: source
      target: '1764434698944'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: answer
      id: 1764434698944-source-1764432707554-target
      selected: false
      source: '1764434698944'
      sourceHandle: source
      target: '1764432707554'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: assigner
      id: 1764432727942-source-1764435430026-target
      selected: false
      source: '1764432727942'
      sourceHandle: source
      target: '1764435430026'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: if-else
      id: 1764078694213-source-1764435961773-target
      selected: false
      source: '1764078694213'
      sourceHandle: source
      target: '1764435961773'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: http-request
      id: 1764435961773-false-1764415216045-target
      selected: false
      source: '1764435961773'
      sourceHandle: 'false'
      target: '1764415216045'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1764435961773-true-1764432727942-target
      selected: false
      source: '1764435961773'
      sourceHandle: 'true'
      target: '1764432727942'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: assigner
      id: 1764423524293-source-1764475245881-target
      selected: false
      source: '1764423524293'
      sourceHandle: source
      target: '1764475245881'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: if-else
      id: 1764475245881-source-1764425644544-target
      selected: false
      source: '1764475245881'
      sourceHandle: source
      target: '1764425644544'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: assigner
        targetType: if-else
      id: 1764435430026-source-1764475860471-target
      selected: false
      source: '1764435430026'
      sourceHandle: source
      target: '1764475860471'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: knowledge-retrieval
      id: 1764475860471-true-1764476031554-target
      selected: false
      source: '1764475860471'
      sourceHandle: 'true'
      target: '1764476031554'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1764475860471-true-1764476041081-target
      selected: false
      source: '1764475860471'
      sourceHandle: 'true'
      target: '1764476041081'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: knowledge-retrieval
        targetType: llm
      id: 1764476031554-source-1764476041081-target
      selected: false
      source: '1764476031554'
      sourceHandle: source
      target: '1764476041081'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 1764426599423-source-1764481346057-target
      selected: false
      source: '1764426599423'
      sourceHandle: source
      target: '1764481346057'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: 1764479942972-source-1764482331078-target
      selected: false
      source: '1764479942972'
      sourceHandle: source
      target: '1764482331078'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1764476041081-source-1764479942972-target
      selected: false
      source: '1764476041081'
      sourceHandle: source
      target: '1764479942972'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: answer
      id: 1764482331078-source-1764484497326-target
      selected: false
      source: '1764482331078'
      sourceHandle: source
      target: '1764484497326'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: answer
      id: 1764482331078-fail-branch-1764484681118-target
      selected: false
      source: '1764482331078'
      sourceHandle: fail-branch
      target: '1764484681118'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: if-else
      id: 1764481346057-source-1764428307690-target
      selected: false
      source: '1764481346057'
      sourceHandle: source
      target: '1764428307690'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: assigner
      id: 1764428307690-cdd95ae6-67c6-4059-833d-0c84828394ab-1764486290152-target
      selected: false
      source: '1764428307690'
      sourceHandle: cdd95ae6-67c6-4059-833d-0c84828394ab
      target: '1764486290152'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: assigner
        targetType: answer
      id: 1764486290152-source-1764491605885-target
      selected: false
      source: '1764486290152'
      sourceHandle: source
      target: '1764491605885'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1764435961773-9e4dfe6d-c183-43c0-b23c-2377306561b9-1764491748731-target
      selected: false
      source: '1764435961773'
      sourceHandle: 9e4dfe6d-c183-43c0-b23c-2377306561b9
      target: '1764491748731'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: assigner
      id: 1764491748731-source-1764492040197-target
      selected: false
      source: '1764491748731'
      sourceHandle: source
      target: '1764492040197'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: http-request
      id: 1764492040197-source-1764428957932-target
      selected: false
      source: '1764492040197'
      sourceHandle: source
      target: '1764428957932'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: assigner
      id: 1764475860471-false-1764494903652-target
      selected: false
      source: '1764475860471'
      sourceHandle: 'false'
      target: '1764494903652'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: assigner
        targetType: answer
      id: 1764494903652-source-1764495940357-target
      selected: false
      source: '1764494903652'
      sourceHandle: source
      target: '1764495940357'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: assigner
      id: 1764435961773-8db390ef-7037-4e61-a88b-4d8a2b942628-1764496035994-target
      selected: false
      source: '1764435961773'
      sourceHandle: 8db390ef-7037-4e61-a88b-4d8a2b942628
      target: '1764496035994'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: if-else
      id: 1764496035994-source-1764475860471-target
      selected: false
      source: '1764496035994'
      sourceHandle: source
      target: '1764475860471'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: http-request
      id: 1764425644544-877c01a3-79ae-44c0-a828-48952d53fb6c-1764510324094-target
      selected: false
      source: '1764425644544'
      sourceHandle: 877c01a3-79ae-44c0-a828-48952d53fb6c
      target: '1764510324094'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 1764510324094-source-1764511080329-target
      selected: false
      source: '1764510324094'
      sourceHandle: source
      target: '1764511080329'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: assigner
      id: 1764511080329-source-1764511882046-target
      selected: false
      source: '1764511080329'
      sourceHandle: source
      target: '1764511882046'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: assigner
        targetType: answer
      id: 1764511882046-source-1764512189067-target
      selected: false
      source: '1764511882046'
      sourceHandle: source
      target: '1764512189067'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1764435961773-30978275-ae9f-485d-a2d1-01d79a620dfd-1764513411691-target
      selected: false
      source: '1764435961773'
      sourceHandle: 30978275-ae9f-485d-a2d1-01d79a620dfd
      target: '1764513411691'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: assigner
      id: 1764513411691-source-1764513719414-target
      selected: false
      source: '1764513411691'
      sourceHandle: source
      target: '1764513719414'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: assigner
        targetType: answer
      id: 1764513719414-source-1764514840061-target
      selected: false
      source: '1764513719414'
      sourceHandle: source
      target: '1764514840061'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: assigner
      id: 1764435961773-d587dd21-9033-46b7-aa9f-6c80a968861e-1764516486086-target
      selected: false
      source: '1764435961773'
      sourceHandle: d587dd21-9033-46b7-aa9f-6c80a968861e
      target: '1764516486086'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: assigner
        targetType: llm
      id: 1764516486086-source-1764516876254-target
      selected: false
      source: '1764516486086'
      sourceHandle: source
      target: '1764516876254'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: answer
      id: 1764517829108-source-1764518069509-target
      selected: false
      source: '1764517829108'
      sourceHandle: source
      target: '1764518069509'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: answer
      id: 1764517829108-fail-branch-1764518095133-target
      selected: false
      source: '1764517829108'
      sourceHandle: fail-branch
      target: '1764518095133'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: answer
      id: 1764425644544-false-1764518620531-target
      selected: false
      source: '1764425644544'
      sourceHandle: 'false'
      target: '1764518620531'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1764516876254-source-1764750231351-target
      source: '1764516876254'
      sourceHandle: source
      target: '1764750231351'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: 1764750231351-source-1764517829108-target
      selected: false
      source: '1764750231351'
      sourceHandle: source
      target: '1764517829108'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: assigner
      id: 1764428307690-false-17644855392000-target
      selected: false
      source: '1764428307690'
      sourceHandle: 'false'
      target: '17644855392000'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: assigner
        targetType: http-request
      id: 17644855392000-source-1764428957932-target
      selected: false
      source: '17644855392000'
      sourceHandle: source
      target: '1764428957932'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - default: ''
          hint: ''
          label: è“æ¡¥è´¦å·
          max_length: 48
          options: []
          placeholder: ''
          required: true
          type: text-input
          variable: lanqiao_user
        - default: ''
          hint: ''
          label: è“æ¡¥å¯†ç 
          max_length: 48
          options: []
          placeholder: ''
          required: true
          type: text-input
          variable: lanqiao_pass
      height: 134
      id: '1764078694213'
      position:
        x: 317.51429711474077
        y: -99.69313676899442
      positionAbsolute:
        x: 317.51429711474077
        y: -99.69313676899442
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-83
            key: ''
            type: text
            value: "{\n  \"login_str\": \"{{#1764078694213.lanqiao_user#}}\",\n  \"\
              password\": \"{{#1764078694213.lanqiao_pass#}}\",\n  \"usertype\": 0\n\
              }"
          type: json
        error_strategy: fail-branch
        headers: 'content-type:application/json

          saas-slug:dykj

          origin:https://saas.lanqiao.cn

          referer:https://saas.lanqiao.cn/

          accept:application/json, text/plain, */*'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: è·å–cookieèŠ‚ç‚¹
        type: http-request
        url: https://passport.lanqiao.cn/api/v1/login/
        variables: []
      height: 172
      id: '1764415216045'
      position:
        x: 1564.9556555088468
        y: 196.8703181413196
      positionAbsolute:
        x: 1564.9556555088468
        y: 196.8703181413196
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        code: "function main(inputs) {\n  let h = inputs?.input_headers;\n  if (h\
          \ == null) return { cookie: \"\" };\n  if (typeof h === \"string\") {\n\
          \    try { h = JSON.parse(h); } catch { return { cookie: \"\" }; }\n  }\n\
          \  const raw = h[\"set-cookie\"] || h[\"Set-Cookie\"] || \"\";\n  const\
          \ parts = Array.isArray(raw) ? raw : (raw ? raw.split(/,\\s*(?=[^;=\\s]+=[^;]+)/)\
          \ : []);\n  const map = {};\n  for (const c of parts) {\n    const m = String(c).match(/^\\\
          s*([^=]+)=([^;]*)/);\n    if (m) map[m[1]] = m[2];\n  }\n  if (map[\"lqtoken\"\
          ]) return { cookie: `lqtoken=${map[\"lqtoken\"]}` };\n  const joined = Object.entries(map).map(([k,v])\
          \ => `${k}=${v}`).join(\"; \");\n  return { cookie: joined };\n}\nmodule.exports\
          \ = main;"
        code_language: javascript
        outputs:
          cookie:
            children: null
            type: string
        selected: false
        title: æå–cookieèŠ‚ç‚¹
        type: code
        variables:
        - value_selector:
          - '1764415216045'
          - headers
          value_type: object
          variable: input_headers
      height: 51
      id: '1764415493687'
      position:
        x: 1936.7785783879465
        y: -41.14320013928159
      positionAbsolute:
        x: 1936.7785783879465
        y: -41.14320013928159
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: []
          type: none
        headers: 'Cookie:{{#1764415493687.cookie#}}

          saas-slug:dykj:*

          origin:https://saas.lanqiao.cn

          referer:https://saas.lanqiao.cn/

          accept:application/json, text/plain, */*'
        method: get
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: éªŒè¯cookieèŠ‚ç‚¹
        type: http-request
        url: https://opcenter.lanqiao.cn/api/v1/oms/saas/dykj/simple/
        variables: []
      height: 136
      id: '1764415689772'
      position:
        x: 2254.861275083997
        y: -41.14320013928159
      positionAbsolute:
        x: 2254.861275083997
        y: -41.14320013928159
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        answer: ç™»å½•å¤±è´¥ï¼Œè¯·é‡æ–°è¾“å…¥æ­£ç¡®çš„è´¦å·å’Œå¯†ç 
        selected: false
        title: 'ç™»é™†å¤±è´¥å›å¤ '
        type: answer
        variables: []
      height: 115
      id: '1764422105750'
      position:
        x: 1936.7785783879465
        y: 318.3716903484824
      positionAbsolute:
        x: 1936.7785783879465
        y: 318.3716903484824
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1764415493687'
          - cookie
          variable_selector:
          - conversation
          - cookie
          write_mode: over-write
        selected: false
        title: cookieå˜é‡èµ‹å€¼
        type: assigner
        version: '2'
      height: 83
      id: '1764422617445'
      position:
        x: 2598.470299827489
        y: -41.14320013928159
      positionAbsolute:
        x: 2598.470299827489
        y: -41.14320013928159
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        context:
          enabled: false
          variable_selector: []
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: qwen-flash
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: 1dfda6c5-6362-4bfb-816b-e22bb086a428
          role: system
          text: "ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½å‘¨æŠ¥åŠ©æ‰‹çš„æ„å›¾è¯†åˆ«å¤§è„‘ã€‚\nä½ çš„ä»»åŠ¡æ˜¯åˆ†æç”¨æˆ·çš„è¾“å…¥{{#sys.query#}}ï¼Œå°†å…¶å½’ç±»ä¸ºâ€œæ–°å»ºâ€ã€â€œæ›´æ–°â€æˆ–â€œé—²èŠâ€ä¸‰ç±»ä¹‹ä¸€ï¼Œå¹¶æå–å…³é”®ä¿¡æ¯ã€‚\n\
            \n### æ„å›¾åˆ¤æ–­è§„åˆ™ (Intent Logic):\n\n1. **CREATE (æ–°å»º)**:\n   - ç”¨æˆ·æ˜ç¡®è¯´â€œæ–°å»ºâ€ã€â€œå†™å‘¨æŠ¥â€ã€â€œæ–°å‘¨æŠ¥â€ã€â€œæäº¤å‘¨æŠ¥â€ã€‚\n\
            \   - æˆ–è€…ç”¨æˆ·ç›´æ¥é™ˆè¿°å­¦ä¹ å†…å®¹ï¼ˆä¾‹å¦‚ï¼šâ€œè¿™å‘¨å­¦äº†Javaâ€ã€â€œçœ‹å®Œäº†Væ¨¡å‹â€ï¼‰ï¼Œè€Œæ²¡æœ‰æ˜ç¡®è¯´è¦æ›´æ–°ã€‚\n   - åŒ…å«â€œå¼€å§‹â€ç­‰æ˜ç¡®çš„å¯åŠ¨ä¸šåŠ¡æŒ‡ä»¤ã€‚\n\
            \n2. **UPDATE (æ›´æ–°)**:\n   - åªæœ‰å½“ç”¨æˆ·æ˜ç¡®æåˆ°â€œæ›´æ–°â€ã€â€œä¿®æ”¹â€ã€â€œè¡¥å†™â€ã€â€œæ”¹ä¸€ä¸‹â€ã€â€œå¾€æœŸâ€æ—¶ï¼Œæ‰åˆ¤å®šä¸ºæ›´æ–°ã€‚\n\
            \n3. **CHAT (é—²èŠ)**:\n   - ç”¨æˆ·å‘é€é—®å€™è¯­ï¼ˆå¦‚â€œä½ å¥½â€ã€â€œHelloâ€ã€â€œHiâ€ï¼‰ã€‚\n   - ç”¨æˆ·è¯¢é—®èº«ä»½ï¼ˆå¦‚â€œä½ æ˜¯è°â€ã€â€œä½ èƒ½åšä»€ä¹ˆâ€ï¼‰ã€‚\n\
            \   - å…¶ä»–ä¸â€œå†™å‘¨æŠ¥â€ä¸šåŠ¡å®Œå…¨æ— å…³çš„å¯¹è¯ã€‚\n   \n\n### å†…å®¹æå–è§„åˆ™ (Content Extraction):\n- å¦‚æœæ˜¯\
            \ create æˆ– updateï¼šæå–å‡ºå…·ä½“çš„**å­¦ä¹ çŸ¥è¯†ç‚¹**ï¼ˆå»é™¤â€œå¸®æˆ‘å†™â€ç­‰æŒ‡ä»¤è¯ï¼‰ã€‚\n- å¦‚æœæ˜¯ chatï¼šcontent è®¾ä¸ºç©ºå­—ç¬¦ä¸²\
            \ \"\"ã€‚\n\n### è¾“å‡ºè¦æ±‚:\nè¯·åŠ¡å¿…è¾“å‡ºæ ‡å‡†çš„ JSON æ ¼å¼ã€‚"
        - id: 561ecbfa-0f54-428b-8c9c-cb4a526b5db6
          role: user
          text: 'ç”¨æˆ·å½“å‰çš„è¾“å…¥æ˜¯ï¼š

            "{{#sys.query#}}"


            è¯·åˆ†æå¹¶è¾“å‡º JSONã€‚'
        selected: false
        structured_output:
          schema:
            additionalProperties: false
            properties:
              content:
                description: æå–çš„å­¦ä¹ å†…å®¹ï¼Œé—²èŠæ—¶ä¸ºç©º
                type: string
              intent:
                description: 'ç”¨æˆ·æ„å›¾: ''create'' (æ–°å»º), ''update'' (æ›´æ–°), æˆ– ''chat'' (é—²èŠ)'
                enum:
                - create
                - update
                - chat
                type: string
            required: []
            type: object
        structured_output_enabled: true
        title: æ„å›¾åˆ†ç±»llm
        type: llm
        vision:
          enabled: false
      height: 87
      id: '1764423524293'
      position:
        x: 2932.7634446245893
        y: -41.14320013928159
      positionAbsolute:
        x: 2932.7634446245893
        y: -41.14320013928159
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: c4f1c249-108a-4ec4-afa0-f5ed5b26dc2a
            value: create
            varType: object
            variable_selector:
            - '1764423524293'
            - structured_output
            - intent
          id: 'true'
          logical_operator: and
        - case_id: 877c01a3-79ae-44c0-a828-48952d53fb6c
          conditions:
          - comparison_operator: is
            id: 1f5c90f2-7b8f-488f-b2ae-7a3043194a32
            value: update
            varType: object
            variable_selector:
            - '1764423524293'
            - structured_output
            - intent
          id: 877c01a3-79ae-44c0-a828-48952d53fb6c
          logical_operator: and
        selected: false
        title: æ„å›¾åˆ†æ”¯
        type: if-else
      height: 171
      id: '1764425644544'
      position:
        x: 3561.303208118904
        y: -41.14320013928159
      positionAbsolute:
        x: 3561.303208118904
        y: -41.14320013928159
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: []
          type: none
        headers: 'Accept:application/json, text/plain, */*

          saas-slug:dykj:student

          Cookie:{{#conversation.cookie#}}'
        method: get
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: è·å–å¯ç”¨å‘¨æŠ¥å‘¨æœŸ
        type: http-request
        url: https://opcenter.lanqiao.cn/api/v1/student/myweeks-times/
        variables: []
      height: 152
      id: '1764426599423'
      position:
        x: 3858.8037021398295
        y: -175.38889807543578
      positionAbsolute:
        x: 3858.8037021398295
        y: -175.38889807543578
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        code: "function main(inputs) {\n  let list = [];\n  \n  // 1. å®‰å…¨è§£æè¾“å…¥å­—ç¬¦ä¸²\n\
          \  let bodyObj = {};\n  try {\n    if (typeof inputs.api_body === 'string')\
          \ {\n        bodyObj = JSON.parse(inputs.api_body);\n    } else {\n    \
          \    bodyObj = inputs.api_body;\n    }\n  } catch (e) {\n    // è§£æå¤±è´¥ï¼ŒbodyObj\
          \ ä¿æŒä¸ºç©ºå¯¹è±¡\n  }\n\n  // 2. æš´åŠ›æå–åˆ—è¡¨ (å…¼å®¹å¤šç§è¿”å›æ ¼å¼)\n  \n  // æƒ…å†µ A: ç›´æ¥æ˜¯ Dify å·¥ä½œæµè¿”å›çš„ç»“æ„\
          \ (åŒ…å« available_times_list å­—ç¬¦ä¸²)\n  if (bodyObj.available_times_list) {\n\
          \      try {\n          // å°è¯•å†æ¬¡è§£æå†…éƒ¨å­—ç¬¦ä¸²\n          list = JSON.parse(bodyObj.available_times_list);\n\
          \      } catch (e) {\n          // å¦‚æœä¸æ˜¯å­—ç¬¦ä¸²ï¼Œå¯èƒ½å·²ç»æ˜¯æ•°ç»„äº†\n          list = bodyObj.available_times_list;\n\
          \      }\n  } \n  // æƒ…å†µ B: åŸå§‹ API è¿”å›çš„ç»“æ„ (åŒ…å« data æ•°ç»„)\n  else if (Array.isArray(bodyObj.data))\
          \ {\n      // æå– start_at å’Œ end_at æ‹¼æˆå­—ç¬¦ä¸²\n      list = bodyObj.data.map(item\
          \ => {\n          if (item.start_at && item.end_at) {\n              return\
          \ `${item.start_at}~${item.end_at}`;\n          }\n          return null;\
          \ // è¿‡æ»¤æ— æ•ˆé¡¹\n      }).filter(i => i !== null);\n  }\n  // æƒ…å†µ C: data æœ¬èº«å°±æ˜¯ä¸ªæ•°ç»„\
          \ (å°‘è§ä½†å¯èƒ½)\n  else if (Array.isArray(bodyObj)) {\n      list = bodyObj;\n\
          \  }\n\n  // ç¡®ä¿ list æ˜¯ä¸€ä¸ªæ•°ç»„\n  if (!Array.isArray(list)) {\n      list =\
          \ [];\n  }\n\n  // 3. æ ¸å¿ƒåˆ¤æ–­é€»è¾‘\n  let status = \"ERROR\";\n  let target_week\
          \ = \"\";\n  let display_text = \"\";\n\n  if (list.length === 0) {\n  \
          \    status = \"EMPTY\"; \n  } else if (list.length === 1) {\n      status\
          \ = \"AUTO\";  \n      target_week = list[0];\n  } else {\n      status\
          \ = \"ASK\";   \n      display_text = list.map((item, i) => `${i+1}. ${item}`).join('\\\
          n');\n  }\n\n  return { \n    status,        \n    target_week,   \n   \
          \ display_text   \n  };\n}"
        code_language: javascript
        outputs:
          display_text:
            children: null
            type: string
          status:
            children: null
            type: string
          target_week:
            children: null
            type: string
        selected: false
        title: æ£€æµ‹å‘¨æŠ¥å‘¨æœŸæ•°é‡
        type: code
        variables:
        - value_selector:
          - '1764426599423'
          - body
          value_type: string
          variable: api_body
      height: 51
      id: '1764426731997'
      position:
        x: 4495.920068966316
        y: -175.38889807543578
      positionAbsolute:
        x: 4495.920068966316
        y: -175.38889807543578
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: contains
            id: bdf3a119-9802-4c74-babb-75f2b62e4bb3
            value: EMPTY
            varType: string
            variable_selector:
            - '1764426731997'
            - status
          id: 'true'
          logical_operator: and
        - case_id: cdd95ae6-67c6-4059-833d-0c84828394ab
          conditions:
          - comparison_operator: contains
            id: 154f3409-78ea-4d9b-a029-ef89c07d646f
            value: ASK
            varType: string
            variable_selector:
            - '1764426731997'
            - status
          id: cdd95ae6-67c6-4059-833d-0c84828394ab
          logical_operator: and
        selected: false
        title: å‘¨æœŸæ£€æµ‹åˆ†æ”¯
        type: if-else
      height: 171
      id: '1764428307690'
      position:
        x: 5095.260920714605
        y: -173.48261204489026
      positionAbsolute:
        x: 5095.260920714605
        y: -173.48261204489026
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        answer: æœ¬å‘¨å‘¨æŠ¥å·²åˆ›å»ºæˆ–æœªå¼€æ”¾ã€‚æ‚¨å¯ä»¥å°è¯•è¿›è¡Œæ›´æ–°å¾€æœŸå‘¨æŠ¥
        selected: false
        title: æ²¡æœ‰æ–°å‘¨æŠ¥çš„å›å¤
        type: answer
        variables: []
      height: 115
      id: '1764428752191'
      position:
        x: 5420.873017860484
        y: -330.4897390557453
      positionAbsolute:
        x: 5420.873017860484
        y: -330.4897390557453
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: []
          type: none
        headers: 'Accept:application/json, text/plain, */*

          saas-slug:dykj:student

          Cookie:{{#conversation.cookie#}}'
        method: get
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: è·å–å¯ç”¨è¯¾ç¨‹åˆ—è¡¨
        type: http-request
        url: https://opcenter.lanqiao.cn/api/v1/svc/sms/evaluation/student/course-list/
        variables: []
      height: 152
      id: '1764428957932'
      position:
        x: 5713.365947945546
        y: 134.665415490035
      positionAbsolute:
        x: 5713.365947945546
        y: 134.665415490035
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        code: "/*\n * [å·¥ä½œæµ 2: WF_è·å–å¯ç”¨è¯¾ç¨‹åˆ—è¡¨] çš„ä»£ç èŠ‚ç‚¹ (V2 ç¾åŒ–ç‰ˆ)\n * ç›®æ ‡ï¼š\n * 1. è§£ææ•°æ®ã€‚\n *\
          \ 2. è¾“å‡º result: åŒ…å« ID çš„å®Œæ•´ JSONï¼ˆä¾›åç»­æµç¨‹ä½¿ç”¨ï¼‰ã€‚\n * 3. è¾“å‡º display_text: ä»…åŒ…å« \"\
          åºå·. è¯¾ç¨‹å\" çš„çº¯æ–‡æœ¬ï¼ˆä¾›å±•ç¤ºå’Œé€‰æ‹©ï¼‰ã€‚\n */\n\nfunction main(inputs) {\n  // 1. è·å–è¾“å…¥\n\
          \  let body = inputs?.input_body;\n\n  // 2. ç¨³å¥çš„æ£€æŸ¥ä¸è§£æ\n  if (body == null)\
          \ return { result: \"[]\", display_text: \"æ— å¯ç”¨è¯¾ç¨‹\" }; \n  if (typeof body\
          \ === 'string') {\n    try { body = JSON.parse(body); } catch { return {\
          \ result: \"[]\", display_text: \"æ•°æ®è§£æé”™è¯¯\" }; }\n  }\n  if (typeof body\
          \ !== 'object' || body === null) return { result: \"[]\", display_text:\
          \ \"æ— å¯ç”¨è¯¾ç¨‹\" };\n\n  // 3. æå–æ•°æ®æº\n  let sourceArray = [];\n  if (body &&\
          \ Array.isArray(body.data)) {\n    sourceArray = body.data;\n  }\n\n  //\
          \ 4. è½¬æ¢æ•°æ® (åŒæ—¶ç”Ÿæˆ JSON å¯¹è±¡å’Œç¾è§‚çš„æ–‡æœ¬)\n  const cleanList = sourceArray.map((item,\
          \ index) => {\n    // åºå·ä» 1 å¼€å§‹\n    const currentNum = index + 1;\n    const\
          \ name = item?.course_name ?? \"æœªçŸ¥è¯¾ç¨‹\";\n    \n    return {\n      index:\
          \ currentNum,          // æ˜¾å¼åŠ å…¥åºå·\n      name: name,\n      bind_id: item?.course_id\
          \ ?? null,\n      yk_id: item?.course_id_yk ?? null,\n      // é¢„ç”Ÿæˆå•è¡Œæ˜¾ç¤ºæ–‡æœ¬ï¼Œæ–¹ä¾¿è°ƒè¯•\n\
          \      _display: `${currentNum}. ${name}` \n    };\n  });\n\n  // 5. ç”Ÿæˆçº¯æ–‡æœ¬åˆ—è¡¨\
          \ (è¿™å°±æ˜¯æ‚¨è¦çš„â€œç¾è§‚â€éƒ¨åˆ†)\n  // è¾“å‡ºç¤ºä¾‹:\n  // 1. GJ-02-Linux åŸºç¡€ 1.8\n  // 2. GJ-03-Java\
          \ ç¨‹åºè®¾è®¡åŸºç¡€ 1.8\n  const displayString = cleanList.map(item => item._display).join('\\\
          n');\n\n  // 6. è¿”å›ç»“æœ\n  return { \n    // å®Œæ•´æ•°æ® (JSON å­—ç¬¦ä¸²)\n    result: JSON.stringify(cleanList),\
          \ \n    // ç¾è§‚åˆ—è¡¨ (çº¯æ–‡æœ¬å­—ç¬¦ä¸²)\n    display_text: displayString || \"æœªæ‰¾åˆ°å…³è”è¯¾ç¨‹\"\
          \ \n  };\n}\n\nmodule.exports = main;"
        code_language: javascript
        outputs:
          display_text:
            children: null
            type: string
          result:
            children: null
            type: string
        selected: false
        title: ä»£ç æ‰§è¡Œ (è¯¾ç¨‹æ¸…æ´—)
        type: code
        variables:
        - value_selector:
          - '1764428957932'
          - body
          value_type: string
          variable: input_body
      height: 51
      id: '1764430081871'
      position:
        x: 6015.365947945546
        y: 134.665415490035
      positionAbsolute:
        x: 6015.365947945546
        y: 134.665415490035
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        answer: å‘¨æœŸå·²é”å®šã€‚è¯·å›å¤åºå·é€‰æ‹©å…³è”è¯¾ç¨‹ï¼š {{#1764430081871.display_text#}}
        selected: false
        title: å‘¨æœŸé”å®šå›å¤
        type: answer
        variables: []
      height: 118
      id: '1764432707554'
      position:
        x: 6633.101213830572
        y: 134.665415490035
      positionAbsolute:
        x: 6633.101213830572
        y: 134.665415490035
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        code: "function main(inputs) {\n  // åˆå§‹åŒ–é»˜è®¤è¿”å›å€¼ (ç¡®ä¿æ‰€æœ‰è¾“å‡ºå˜é‡éƒ½å­˜åœ¨)\n  let result\
          \ = {\n    status: \"FAIL\",\n    name: \"\",\n    bind_ids: \"[]\",\n \
          \   yk_ids: \"[]\"\n  };\n\n  try {\n    // 1. è§£æè¯¾ç¨‹åˆ—è¡¨æ•°æ®\n    let courses\
          \ = [];\n    if (typeof inputs.course_json === 'string') {\n        try\
          \ {\n            courses = JSON.parse(inputs.course_json);\n        } catch(e)\
          \ { return result; }\n    } else if (Array.isArray(inputs.course_json))\
          \ {\n        courses = inputs.course_json;\n    }\n\n    if (!courses ||\
          \ courses.length === 0) return result;\n\n    // 2. è§£æç”¨æˆ·è¾“å…¥çš„å¤šé€‰æ•°å­—\n    //\
          \ å°†ä¸­æ–‡é€—å·æ›¿æ¢ä¸ºè‹±æ–‡é€—å·ï¼Œç„¶åç”¨éæ•°å­—å­—ç¬¦(é€—å·ã€ç©ºæ ¼ç­‰)åˆ†å‰²\n    let inputStr = String(inputs.user_input\
          \ || \"\").trim();\n    // æ­£åˆ™è§£é‡Šï¼šsplit(/[^0-9]+/) ä¼šæŠŠ \"1,2 3ï¼Œ4\" æ‹†åˆ†æˆ [\"\
          1\", \"2\", \"3\", \"4\"]\n    let inputNumbers = inputStr.replace(/ï¼Œ/g,\
          \ ',').split(/[^0-9]+/);\n\n    // 3. éå†æ•°å­—ï¼Œæ”¶é›† ID\n    let selectedBindIds\
          \ = [];\n    let selectedYkIds = [];\n    let selectedNames = [];\n\n  \
          \  inputNumbers.forEach(numStr => {\n        let index = parseInt(numStr);\n\
          \        // æ£€æŸ¥ç´¢å¼•æœ‰æ•ˆæ€§ (ç”¨æˆ·è¾“å…¥1å¯¹åº”æ•°ç»„ä¸‹æ ‡0)\n        let arrayIndex = index - 1;\n\
          \        \n        if (!isNaN(index) && arrayIndex >= 0 && arrayIndex <\
          \ courses.length) {\n            let item = courses[arrayIndex];\n     \
          \       \n            // æ”¶é›†æ•°æ® (å¦‚æœIDå­˜åœ¨)\n            if (item.bind_id) selectedBindIds.push(item.bind_id);\n\
          \            if (item.yk_id) selectedYkIds.push(item.yk_id);\n         \
          \   if (item.name) selectedNames.push(item.name);\n        }\n    });\n\n\
          \    // 4. åˆ¤æ–­æ˜¯å¦è‡³å°‘é€‰ä¸­äº†ä¸€ä¸ª\n    if (selectedBindIds.length > 0) {\n        result.status\
          \ = \"SUCCESS\";\n        // å°† ID æ•°ç»„è½¬ä¸º JSON å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ \"[1001, 1002]\"\n  \
          \      result.bind_ids = JSON.stringify(selectedBindIds);\n        result.yk_ids\
          \ = JSON.stringify(selectedYkIds);\n        // å°†å¤šä¸ªè¯¾ç¨‹åæ‹¼æ¥ï¼Œä¾‹å¦‚ \"JavaåŸºç¡€, MySQLæ•°æ®åº“\"\
          \n        result.name = selectedNames.join(\", \");\n    }\n\n  } catch\
          \ (e) {\n    // é”™è¯¯å¤„ç†\n  }\n\n  return result;\n}\n\nmodule.exports = main;"
        code_language: javascript
        outputs:
          bind_ids:
            children: null
            type: string
          name:
            children: null
            type: string
          status:
            children: null
            type: string
          yk_ids:
            children: null
            type: string
        selected: false
        title: ä»£ç æ‰§è¡Œ (é€‰è¯¾é€»è¾‘)
        type: code
        variables:
        - value_selector:
          - conversation
          - temp_course_list
          value_type: string
          variable: course_json
        - value_selector:
          - sys
          - query
          value_type: string
          variable: user_input
      height: 51
      id: '1764432727942'
      position:
        x: 1936.7785783879465
        y: -893.1032374692558
      positionAbsolute:
        x: 1936.7785783879465
        y: -893.1032374692558
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        items:
        - input_type: constant
          operation: set
          value: selecting_course
          variable_selector:
          - conversation
          - current_step
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '1764430081871'
          - result
          variable_selector:
          - conversation
          - temp_course_list
          write_mode: over-write
        selected: false
        title: ç¯å¢ƒæ”¹å˜ï¼Œè¯¾ç¨‹èµ‹å€¼
        type: assigner
        version: '2'
      height: 109
      id: '1764434698944'
      position:
        x: 6314.52311361065
        y: 134.665415490035
      positionAbsolute:
        x: 6314.52311361065
        y: 134.665415490035
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        items:
        - input_type: constant
          operation: set
          value: normal
          variable_selector:
          - conversation
          - current_step
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '1764432727942'
          - bind_ids
          variable_selector:
          - conversation
          - new_bind_ids
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '1764432727942'
          - name
          variable_selector:
          - conversation
          - new_name
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '1764432727942'
          - yk_ids
          variable_selector:
          - conversation
          - new_yk_ids
          write_mode: over-write
        selected: false
        title: ç¯å¢ƒæ¢å¤ï¼Œé€‰è¯¾é€»è¾‘3ä¸ªå˜é‡èµ‹å€¼
        type: assigner
        version: '2'
      height: 161
      id: '1764435430026'
      position:
        x: 2254.861275083997
        y: -893.1032374692558
      positionAbsolute:
        x: 2254.861275083997
        y: -893.1032374692558
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 936803bf-c6b2-429f-8ab7-1bc2e9c009ac
            value: selecting_course
            varType: string
            variable_selector:
            - conversation
            - current_step
          id: 'true'
          logical_operator: and
        - case_id: 8db390ef-7037-4e61-a88b-4d8a2b942628
          conditions:
          - comparison_operator: is
            id: 9c3343a9-9e76-4a08-9bb5-7002e8c7df4e
            value: waiting_for_content
            varType: string
            variable_selector:
            - conversation
            - current_step
          id: 8db390ef-7037-4e61-a88b-4d8a2b942628
          logical_operator: and
        - case_id: 9e4dfe6d-c183-43c0-b23c-2377306561b9
          conditions:
          - comparison_operator: is
            id: b4f68ebf-62bb-4808-8f2d-85aa182dc11f
            value: selecting_week
            varType: string
            variable_selector:
            - conversation
            - current_step
          id: 9e4dfe6d-c183-43c0-b23c-2377306561b9
          logical_operator: and
        - case_id: 30978275-ae9f-485d-a2d1-01d79a620dfd
          conditions:
          - comparison_operator: is
            id: 5ccc5eba-77ce-446c-9988-d9eab2ed3956
            value: selecting_report_to_update
            varType: string
            variable_selector:
            - conversation
            - current_step
          id: 30978275-ae9f-485d-a2d1-01d79a620dfd
          logical_operator: and
        - case_id: d587dd21-9033-46b7-aa9f-6c80a968861e
          conditions:
          - comparison_operator: is
            id: 4f094ee3-7bb9-41a4-97b2-9621758e8cdb
            value: waiting_for_update_content
            varType: string
            variable_selector:
            - conversation
            - current_step
          logical_operator: and
        selected: false
        title: å…¨å±€æ¨¡å¼åˆ†æ”¯
        type: if-else
      height: 315
      id: '1764435961773'
      position:
        x: 639.9385744620831
        y: -78.69313676899442
      positionAbsolute:
        x: 639.9385744620831
        y: -78.69313676899442
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1764423524293'
          - structured_output
          - intent
          variable_selector:
          - conversation
          - user_intent
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '1764423524293'
          - structured_output
          - content
          variable_selector:
          - conversation
          - user_content
          write_mode: over-write
        selected: false
        title: ç”¨æˆ·æ„å›¾åŠç¬¬ä¸€æ­¥å­¦ä¹ å†…å®¹èµ‹å€¼
        type: assigner
        version: '2'
      height: 109
      id: '1764475245881'
      position:
        x: 3255.5789652622125
        y: -175.38889807543578
      positionAbsolute:
        x: 3255.5789652622125
        y: -175.38889807543578
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: not empty
            id: 6f7423ce-0c06-4fdc-96b5-65f35e8525c0
            value: ''
            varType: string
            variable_selector:
            - conversation
            - user_content
          id: 'true'
          logical_operator: and
        selected: false
        title: ç¬¬äºŒæ¬¡æ£€ç´¢ç”¨æˆ·æ˜¯å¦è¾“å…¥å­¦ä¹ å†…å®¹
        type: if-else
      height: 123
      id: '1764475860471'
      position:
        x: 2598.470299827489
        y: -893.1032374692558
      positionAbsolute:
        x: 2598.470299827489
        y: -893.1032374692558
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        dataset_ids:
        - GSB5/o+6+twFKZUXLTlZ6GMJDxfTI8nTasOViKxe58fZGP+1Ckkm9S/LKQ3ijKiW
        multiple_retrieval_config:
          reranking_enable: true
          reranking_mode: reranking_model
          reranking_model:
            model: gte-rerank
            provider: langgenius/tongyi/tongyi
          top_k: 4
        query_variable_selector:
        - conversation
        - user_content
        retrieval_mode: multiple
        selected: false
        title: å­¦ä¹ å†…å®¹çŸ¥è¯†æ£€ç´¢
        type: knowledge-retrieval
      height: 89
      id: '1764476031554'
      position:
        x: 2932.7634446245893
        y: -953.177718762886
      positionAbsolute:
        x: 2932.7634446245893
        y: -953.177718762886
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        context:
          enabled: true
          variable_selector:
          - '1764476031554'
          - result
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: qwen3-max
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: 19e3f0d2-9309-43b0-8552-4e3328e31700
          role: system
          text: "# --- 1. æ ¸å¿ƒæŒ‡ä»¤ï¼šä½ çš„è§’è‰² --- ä½ å°†æ‰®æ¼”ä¸€ä¸ªå¤§ä¸“ç”Ÿ ã€‚ ä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®æˆ‘æä¾›çš„â€œæœ¬å‘¨å­¦ä¹ è¦ç‚¹â€ï¼Œç”¨ä½ çš„å£å»ï¼Œå†™ä¸€ä»½å†…å®¹å……å®ã€ç»†èŠ‚åˆç†çš„å‘¨æŠ¥è‰ç¨¿ã€‚\n\
            # --- 2. å…³é”®é£æ ¼ï¼šå¦‚ä½•æ‰®æ¼”å¤§ä¸“ç”Ÿï¼ˆå¾ˆé‡è¦ï¼‰ ---\nå£å»ï¼š ä¿æŒå£è¯­åŒ–ã€æ¥åœ°æ°”ï¼Œå°±åƒä¸€ä¸ªå­¦ç”Ÿåœ¨å†™ä¸€ç¯‡è¯¦ç»†çš„å­¦ä¹ æ—¥è®°ã€‚\næ°´å¹³ï¼š\
            \ ä½ æ˜¯ä¸€ä¸ªæ­£åœ¨å­¦ä¹ çš„å­¦ç”Ÿï¼Œä¸æ˜¯ä¸€ä¸ªä¸“å®¶ã€‚\nã€æ–°è¦æ±‚ã€‘ï¼šå†…å®¹è¦å……å®ã€è¨€ä¹‹æœ‰ç‰©ã€‚é€‚å½“æè¿°ä½ çš„æ€è€ƒè¿‡ç¨‹ã€å¡ä½çš„ç»†èŠ‚ï¼Œä»¥åŠä½ æ˜¯æ€ä¹ˆæƒ³æ˜ç™½çš„ï¼Œä½†ä¸è¦ä¸ºäº†å‡‘å­—æ•°è€Œè¿‡åº¦å †ç Œã€‚\n\
            # --- 3. å…³é”®ä»»åŠ¡ï¼šå¦‚ä½•å†™å››ä¸ªå­—æ®µ ---\nsummary (æ€»ç»“):\nç”¨ä½ è‡ªå·±çš„è¯è¯´è¯´è¿™å‘¨å­¦äº†å•¥ã€‚\n(æ¨è!) å¯ä»¥åˆ†æˆ (ä¸€)ã€(äºŒ)\
            \ å‡ ç‚¹æ¥è¯´æ˜ï¼Œå¹¶ç®€è¿°ä½ å¯¹æ¯ä¸ªçŸ¥è¯†ç‚¹çš„ä¸ªäººä½“ä¼šã€‚\nencountered_issues (æ‰€é‡é—®é¢˜):\nã€è¿™æ˜¯é‡ç‚¹ï¼Œè¦å†™æ¸…æ¥šï¼ã€‘\n(æ¨è!)\
            \ å†™æ˜ä½ å…·ä½“å¡åœ¨å“ªé‡Œäº†ã€‚æ¯”å¦‚ï¼š \"æˆ‘æä¸æ‡‚ A å’Œ B æœ‰å•¥åŒºåˆ«ï¼Œæˆ‘ä»¥ä¸º A æ˜¯ç”¨æ¥...çš„ï¼Œç»“æœä¸€ç”¨å°±æŠ¥é”™ xxxã€‚\"\n(æ¨è!)\
            \ æˆ–è€… \"è¿™ä¸ª xxx å±æ€§åˆ°åº•æ˜¯å¹²å•¥çš„ï¼Ÿæˆ‘çœ‹æ•™ç¨‹æ˜¯è¿™ä¹ˆå†™çš„ï¼Œè‡ªå·±ä¸€ç”¨å°±ä¸ç”Ÿæ•ˆï¼Œå¡äº†æˆ‘å¥½ä¹…ã€‚\"\nsolution (è§£å†³æ–¹æ¡ˆ):\n\
            ã€å†™æ¸…æ¥šè§£å†³è¿‡ç¨‹ã€‚ã€‘\n(æ¨è!) æè¿°ä½ æ˜¯æ€ä¹ˆä¸€æ­¥æ­¥æƒ³æ˜ç™½çš„ã€‚æ¯”å¦‚ï¼š\"æˆ‘æœ€åå»æŸ¥äº†å¥½å¤šåšå®¢å’Œèµ„æ–™ï¼Œæ‰æ˜ç™½åŸæ¥ A å’Œ B çš„åŒºåˆ«æ˜¯...ã€‚\"\
            \n(æ¨è!) \"æœ€åè¿˜æ˜¯çœ‹åˆ«äººçš„ç¬”è®°ï¼Œå‘ç°æˆ‘å°‘å†™äº†ä¸€è¡Œ ...ï¼ŒåŠ ä¸Šå»å°±å¥½äº†ã€‚ä¸‹æ¬¡ä¸€å®šå¾—ç»†å¿ƒç‚¹ã€‚\"\nnext_week_plan (ä¸‹å‘¨è®¡åˆ’):\n\
            ã€ç¨å¾®å…·ä½“ä¸€ç‚¹ï¼Œä¸è¦å°±ä¸€å¥è¯ã€‚ã€‘\n(æ¨è!) \"ä¸‹å‘¨æˆ‘å‡†å¤‡æŠŠ XX è¯¾çš„å‰©ä¸‹å‡ èŠ‚çœ‹å®Œï¼Œç‰¹åˆ«æ˜¯ yyy é‚£ä¸ªéƒ¨åˆ†ã€‚ç„¶åæˆ‘è¿˜æƒ³åšä¸ªå°ç»ƒä¹ ï¼ŒæŠŠè¿™å‘¨å­¦çš„\
            \ xxx çœŸæ­£ç”¨ä¸Šã€‚\"\n# --- 4. ä½ çš„è¾“å‡ºæ ¼å¼ --- ä½ å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ JSON æ ¼å¼è¿”å›ï¼Œåªè¿”å› JSONï¼Œä¸è¦æœ‰å…¶ä»–ä»»ä½•æ–‡å­—ã€‚\n\
            JSON\n{\n  \"summary\": \"...\",\n  \"encountered_issues\": \"...\",\n\
            \  \"solution\": \"...\",\n  \"next_week_plan\": \"...\"\n}"
        - id: f4559898-e608-485c-9d61-722b28e66b66
          role: user
          text: "å¥½äº†ï¼Œè¿™æ˜¯ä½ è¿™æ¬¡éœ€è¦å¤„ç†çš„ä¿¡æ¯ã€‚è¯·æ ¹æ®ä½ çš„è§’è‰²å’Œé£æ ¼ï¼Œå¸®æˆ‘ç”Ÿæˆå‘¨æŠ¥è‰ç¨¿ã€‚\n\n# 1. çŸ¥è¯†åº“ä¸Šä¸‹æ–‡ (ä¾›ä½ å‚è€ƒçš„çŸ¥è¯†ç‚¹)\n\
            {{#context#}}\n\n# 2. æŠ¥å‘Šä¸»é¢˜ (è¯¾ç¨‹å)\n{{#conversation.new_name#}}\n\n# 3.\
            \ æœ¬å‘¨å­¦ä¹ è¦ç‚¹ (æˆ‘çš„è¾“å…¥)\n{{#conversation.user_content#}}\n\n# 4. å†™ä½œç»“æ„ (ä½ åªéœ€è¦å‚è€ƒè¿™ä¸ªç»“æ„)\n\
            <example>\n{\n  \"summary\": \"æœ¬å‘¨é‡ç‚¹å­¦ä¹ äº† jQuery çš„é€‰æ‹©å™¨ç›¸å…³çŸ¥è¯†...\",\n  \"encountered_issues\"\
            : \"é€‰æ‹©å™¨è¯­æ³•æ··æ·†ï¼š...\",\n  \"solution\": \"é’ˆå¯¹é€‰æ‹©å™¨è¯­æ³•æ··æ·†ï¼š...\",\n  \"next_week_plan\"\
            : \"å‘¨ä¸€ï¼šjQuery ç­›é€‰é€‰æ‹©å™¨ä¸è¿‡æ»¤æ–¹æ³•...\"\n}\n</example>"
        selected: false
        title: 'å‘¨æŠ¥ç”ŸæˆLLM '
        type: llm
        vision:
          enabled: false
      height: 87
      id: '1764476041081'
      position:
        x: 3255.5789652622125
        y: -860.9433617991193
      positionAbsolute:
        x: 3255.5789652622125
        y: -860.9433617991193
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        code: "function main(inputs) {\n  // 1. è§£æ LLM è¿”å›çš„å†…å®¹ (æ¸…æ´— Markdown æ ‡è®°)\n  let\
          \ content = {};\n  try {\n    let text = inputs.llm_response || \"{}\";\n\
          \    // å»æ‰å¯èƒ½å­˜åœ¨çš„ ```json å’Œ ``` åŒ…è£¹\n    text = text.replace(/```json/g, \"\
          \").replace(/```/g, \"\").trim();\n    content = JSON.parse(text);\n  }\
          \ catch (e) {\n    // å…œåº•ï¼šå¦‚æœ LLM å‘ç–¯è¾“å‡ºäº†é JSONï¼Œç»™ä¸ªé»˜è®¤å€¼é˜²æ­¢æµç¨‹å´©æºƒ\n    content = {\n\
          \        summary: \"è‡ªåŠ¨ç”Ÿæˆå†…å®¹è§£æå¤±è´¥ï¼Œè¯·æ‰‹åŠ¨ä¿®æ”¹ã€‚\",\n        encountered_issues: \"\
          æ— \",\n        solution: \"æ— \",\n        next_week_plan: \"æ— \"\n    };\n\
          \  }\n\n  // 2. æ¸…æ´— ID (ç¡®ä¿è½¬ä¸ºæ•°å­—æ•°ç»„ [123])\n  function cleanAndNormalize(input)\
          \ {\n      if (!input) return [];\n      let parsed = input;\n      try\
          \ {\n        while (typeof parsed === 'string') {\n          parsed = JSON.parse(parsed);\n\
          \        }\n      } catch (e) {}\n      if (!parsed) return [];\n      \n\
          \      let arr = Array.isArray(parsed) ? parsed : [parsed];\n      // å¼ºåˆ¶è½¬æ•°å­—å¹¶è¿‡æ»¤\n\
          \      return arr.map(item => parseInt(item, 10)).filter(n => !isNaN(n));\n\
          \  }\n\n  // 3. ç»„è£…æœ€ç»ˆçš„ API Payload\n  const finalPayload = {\n    week_detail:\
          \ inputs.week,\n    summary: content.summary || \"\",\n    encountered_issues:\
          \ content.encountered_issues || \"\",\n    solution: content.solution ||\
          \ \"\",\n    next_week_plan: content.next_week_plan || \"\",\n    \n   \
          \ // ä½¿ç”¨æ¸…æ´—åçš„ ID\n    bind_courses: cleanAndNormalize(inputs.bind_str),\n\
          \    yk_course_ids: cleanAndNormalize(inputs.yk_str)\n  };\n\n  // 4. è¿”å›å­—ç¬¦ä¸²ç»™\
          \ HTTP èŠ‚ç‚¹\n  return {\n    final_post_body: JSON.stringify(finalPayload)\n\
          \  };\n}"
        code_language: javascript
        outputs:
          final_post_body:
            children: null
            type: string
        selected: false
        title: å‘¨æŠ¥æ•°æ®æ¸…æ´—
        type: code
        variables:
        - value_selector:
          - '1764476041081'
          - text
          value_type: string
          variable: llm_response
        - value_selector:
          - conversation
          - new_bind_ids
          value_type: string
          variable: bind_str
        - value_selector:
          - conversation
          - new_yk_ids
          value_type: string
          variable: yk_str
        - value_selector:
          - conversation
          - week_detail
          value_type: string
          variable: week
      height: 51
      id: '1764479942972'
      position:
        x: 3561.303208118904
        y: -860.9433617991193
      positionAbsolute:
        x: 3561.303208118904
        y: -860.9433617991193
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        code: "function main(inputs) {\n  let list = [];\n  let rawList = []; \n \
          \ \n  // 1. è§£æåŸå§‹ JSON\n  try {\n    const resp = JSON.parse(inputs.api_body\
          \ || \"{}\");\n    \n    // é’ˆå¯¹æ‚¨çš„æ•°æ®ç»“æ„: {\"data\": [{\"start_at\": \"...\"\
          , \"end_at\": \"...\"}]}\n    if (Array.isArray(resp.data)) {\n        rawList\
          \ = resp.data;\n    } \n    // å…¼å®¹æ—§é€»è¾‘\n    else if (resp.available_times_list)\
          \ {\n        try { rawList = JSON.parse(resp.available_times_list); } catch(e){}\n\
          \    }\n  } catch (e) { rawList = []; }\n\n  // 2. æ ¼å¼åŒ–ä¸º \"YYYY-MM-DD~YYYY-MM-DD\"\
          \ æ ‡å‡†å­—ç¬¦ä¸²\n  list = rawList.map(item => {\n      if (typeof item === 'string')\
          \ return item;\n      if (item.start_at && item.end_at) {\n          return\
          \ `${item.start_at}~${item.end_at}`;\n      }\n      return null;\n  }).filter(i\
          \ => i !== null);\n\n  // 3. é€»è¾‘åˆ¤æ–­\n  let status = \"ERROR\";\n  let target_week\
          \ = \"\"; \n  let display_text = \"\";\n\n  if (list.length === 0) {\n \
          \     status = \"EMPTY\"; \n  } else if (list.length === 1) {\n      status\
          \ = \"AUTO\";  \n      target_week = list[0]; \n  } else {\n      status\
          \ = \"ASK\";   \n      display_text = list.map((item, i) => `${i+1}. ${item}`).join('\\\
          n');\n  }\n\n  // 4. è¾“å‡º (å…³é”®è¡¥å……!)\n  return { \n    status, \n    target_week,\
          \  \n    display_text,\n    // [æ–°å¢] è¾“å‡ºæ¸…æ´—åçš„å®Œæ•´åˆ—è¡¨ï¼Œä¾›å¤šå‘¨æœŸåˆ†æ”¯å­˜å…¥ä¼šè¯å˜é‡\n    raw_list:\
          \ JSON.stringify(list) \n  };\n}"
        code_language: javascript
        outputs:
          display_text:
            children: null
            type: string
          raw_list:
            children: null
            type: string
          status:
            children: null
            type: string
          target_week:
            children: null
            type: string
        selected: false
        title: ä»£ç èŠ‚ç‚¹ï¼ˆæ¸…æ´—åŸå§‹å‘¨æœŸï¼‰
        type: code
        variables:
        - value_selector:
          - '1764426599423'
          - body
          value_type: string
          variable: api_body
      height: 51
      id: '1764481346057'
      position:
        x: 4495.920068966316
        y: -260.9256202556319
      positionAbsolute:
        x: 4495.920068966316
        y: -260.9256202556319
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-52
            key: ''
            type: text
            value: '{{#1764479942972.final_post_body#}}'
          type: json
        error_strategy: fail-branch
        headers: 'Accept:application/json, text/plain, */*

          saas-slug:dykj:student

          Content-Type:application/json

          Cookie:{{#conversation.cookie#}}'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: æ–°å‘¨æŠ¥ä¸Šä¼ è¯·æ±‚
        type: http-request
        url: https://opcenter.lanqiao.cn/api/v1/svc/sms/evaluation/student/myweeks/
        variables: []
      height: 188
      id: '1764482331078'
      position:
        x: 3858.8037021398295
        y: -860.9433617991193
      positionAbsolute:
        x: 3858.8037021398295
        y: -860.9433617991193
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        answer: "âœ… æ­å–œï¼å‘¨æŠ¥å·²æˆåŠŸæäº¤ã€‚ \n\U0001F4C5 å‘¨æœŸï¼š{{#conversation.week_detail#}}\n\U0001F4DA\
          \ å…³è”è¯¾ç¨‹ï¼š{{#conversation.new_name#}} \næ‚¨ç°åœ¨å¯ä»¥ç™»å½•è“æ¡¥å®˜ç½‘æŸ¥çœ‹è¯¦æƒ…ï¼Œä»»åŠ¡ç»“æŸã€‚\n\n\U0001F4A1\
          \ å†…å®¹æ‘˜è¦ï¼š\n{{#1764479942972.final_post_body#}}"
        selected: false
        title: æˆåŠŸå›å¤
        type: answer
        variables: []
      height: 190
      id: '1764484497326'
      position:
        x: 4140.83826331204
        y: -953.177718762886
      positionAbsolute:
        x: 4140.83826331204
        y: -953.177718762886
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        answer: 'âŒ æŠ±æ­‰ï¼Œå‘¨æŠ¥æäº¤å¤±è´¥ã€‚ é”™è¯¯è¯¦æƒ…ï¼š{{#1764482331078.error_message#}}

          å¯èƒ½çš„åŸå› ï¼š

          Cookie å¯èƒ½åˆšå¥½è¿‡æœŸï¼Œè¯·å°è¯•é‡æ–°è¾“å…¥ "è´¦å· å¯†ç " ç™»å½•ã€‚

          è“æ¡¥æœåŠ¡å™¨æš‚æ—¶ä¸ç¨³å®šã€‚

          è¯¥å‘¨æœŸçš„å‘¨æŠ¥å¯èƒ½å·²ç»è¢«åˆ›å»ºè¿‡äº†ï¼ˆé‡å¤æäº¤ï¼‰ã€‚

          è¯·ç¨åé‡è¯•ï¼Œæˆ–æ£€æŸ¥è“æ¡¥å®˜ç½‘ã€‚'
        selected: false
        title: å¤±è´¥å›å¤
        type: answer
        variables: []
      height: 198
      id: '1764484681118'
      position:
        x: 4140.83826331204
        y: -722.5851237368364
      positionAbsolute:
        x: 4140.83826331204
        y: -722.5851237368364
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1764481346057'
          - target_week
          variable_selector:
          - conversation
          - week_detail
          write_mode: over-write
        selected: false
        title: 'åŸå§‹å‘¨æœŸèµ‹å€¼ '
        type: assigner
        version: '2'
      height: 83
      id: '17644855392000'
      position:
        x: 5420.873017860484
        y: 174.92416816717434
      positionAbsolute:
        x: 5420.873017860484
        y: 174.92416816717434
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        items:
        - input_type: constant
          operation: set
          value: selecting_week
          variable_selector:
          - conversation
          - current_step
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '1764481346057'
          - raw_list
          variable_selector:
          - conversation
          - week_detail
          write_mode: over-write
        selected: false
        title: å¤šå‘¨æŠ¥çŠ¶æ€ï¼Œå¹¶èµ‹å€¼åŸå§‹å‘¨æœŸ
        type: assigner
        version: '2'
      height: 109
      id: '1764486290152'
      position:
        x: 5420.873017860484
        y: -94.08773543661607
      positionAbsolute:
        x: 5420.873017860484
        y: -94.08773543661607
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        answer: æ£€æµ‹åˆ°æœ‰å¤šä¸ªæœªå®Œæˆçš„å‘¨æŠ¥å‘¨æœŸï¼Œè¯·å›å¤ åºå·æ•°å­— é€‰æ‹©ï¼š {{#1764481346057.display_text#}}
        selected: false
        title: å¤šå‘¨æœŸå›å¤
        type: answer
        variables: []
      height: 134
      id: '1764491605885'
      position:
        x: 5722.873017860484
        y: -94.08773543661607
      positionAbsolute:
        x: 5722.873017860484
        y: -94.08773543661607
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        code: "function main(inputs) {\n  try {\n    const list = JSON.parse(inputs.list_json);\n\
          \    const index = parseInt(inputs.user_input) - 1;\n    if (!isNaN(index)\
          \ && index >= 0 && index < list.length) {\n        return { \n         \
          \   target_week: list[index], // æå–å‡º \"2025-11-xx~...\"\n            status:\
          \ \"SUCCESS\"\n        };\n    }\n  } catch(e) {}\n  return { target_week:\
          \ \"\", status: \"FAIL\" };\n}"
        code_language: javascript
        outputs:
          status:
            children: null
            type: string
          target_week:
            children: null
            type: string
        selected: false
        title: ç”¨æˆ·å›å¤å‘¨æœŸæ¸…æ´—
        type: code
        variables:
        - value_selector:
          - sys
          - query
          value_type: string
          variable: user_input
        - value_selector:
          - conversation
          - week_detail
          value_type: string
          variable: list_json
      height: 51
      id: '1764491748731'
      position:
        x: 2598.470299827489
        y: -398.1262332732035
      positionAbsolute:
        x: 2598.470299827489
        y: -398.1262332732035
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        items:
        - input_type: constant
          operation: set
          value: normal
          variable_selector:
          - conversation
          - current_step
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '1764491748731'
          - target_week
          variable_selector:
          - conversation
          - week_detail
          write_mode: over-write
        selected: false
        title: æœ€ç»ˆå‘¨æœŸèµ‹å€¼
        type: assigner
        version: '2'
      height: 109
      id: '1764492040197'
      position:
        x: 3255.5789652622125
        y: -398.1262332732035
      positionAbsolute:
        x: 3255.5789652622125
        y: -398.1262332732035
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        items:
        - input_type: constant
          operation: set
          value: waiting_for_content
          variable_selector:
          - conversation
          - current_step
          write_mode: over-write
        selected: false
        title: ç¯å¢ƒæ”¹å˜ä¸ºè¯¢é—®ç”¨æˆ·å­¦ä¹ å†…å®¹
        type: assigner
        version: '2'
      height: 83
      id: '1764494903652'
      position:
        x: 2932.7634446245893
        y: -599.2898485586113
      positionAbsolute:
        x: 2932.7634446245893
        y: -599.2898485586113
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        answer: è¯¾ç¨‹å·²é”å®šã€‚è¯·å‘Šè¯‰æˆ‘ï¼Œæ‚¨æœ¬å‘¨å…·ä½“å­¦ä¹ äº†å“ªäº›çŸ¥è¯†ç‚¹ï¼Ÿ
        selected: false
        title: ç¼ºå¤±å­¦ä¹ å†…å®¹å›å¤
        type: answer
        variables: []
      height: 115
      id: '1764495940357'
      position:
        x: 3255.5789652622125
        y: -599.2898485586113
      positionAbsolute:
        x: 3255.5789652622125
        y: -599.2898485586113
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        items:
        - input_type: variable
          operation: over-write
          value:
          - sys
          - query
          variable_selector:
          - conversation
          - user_content
          write_mode: over-write
        - input_type: constant
          operation: set
          value: normal
          variable_selector:
          - conversation
          - current_step
          write_mode: over-write
        selected: false
        title: å˜é‡èµ‹å€¼ 9
        type: assigner
        version: '2'
      height: 109
      id: '1764496035994'
      position:
        x: 2254.861275083997
        y: -599.2898485586113
      positionAbsolute:
        x: 2254.861275083997
        y: -599.2898485586113
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: []
          type: none
        headers: 'saas-slug:dykj:student

          Cookie:{{#conversation.cookie#}}'
        method: get
        params: 'page:1

          page_size:1000'
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: è·å–å¾€æœŸå‘¨æŠ¥åˆ—è¡¨
        type: http-request
        url: https://opcenter.lanqiao.cn/api/v1/svc/sms/evaluation/student/myweeks/
        variables: []
      height: 152
      id: '1764510324094'
      position:
        x: 3858.8037021398295
        y: 35.14138797913756
      positionAbsolute:
        x: 3858.8037021398295
        y: 35.14138797913756
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        code: "function main(inputs) {\n  let list = [];\n  \n  // 1. è§£æ HTTP è¿”å›çš„æ•°æ®\n\
          \  try {\n    let raw = inputs.http_body;\n    // å¦‚æœè¾“å…¥æ˜¯å­—ç¬¦ä¸²ï¼Œå…ˆè½¬æˆå¯¹è±¡\n    if\
          \ (typeof raw === 'string') {\n        try { raw = JSON.parse(raw); } catch(e)\
          \ {}\n    }\n    \n    // æå–æ ¸å¿ƒæ•°æ®åˆ—è¡¨ (data.results)\n    // æ ¹æ®æ‚¨çš„è¾“å‡ºæ ·æœ¬: {\"\
          data\": {\"results\": [...]}}\n    if (raw.data && raw.data.results && Array.isArray(raw.data.results))\
          \ {\n        list = raw.data.results;\n    }\n    // å…¼å®¹å…¶ä»–å¯èƒ½çš„ç»“æ„\n    else\
          \ if (raw.data && Array.isArray(raw.data)) {\n        list = raw.data;\n\
          \    }\n    else if (Array.isArray(raw)) {\n        list = raw;\n    }\n\
          \  } catch (e) { list = []; }\n\n  // 2. ç”Ÿæˆä¾›äººè¯»çš„ display_text (ç®€æ´ç‰ˆèœå•)\n \
          \ // æ ¼å¼: \"1. 2025-11-24~2025-11-30 [Pythonç¼–ç¨‹åŸºç¡€...]\"\n  let displayTextArr\
          \ = list.map((item, index) => {\n      // æå–è¯¾ç¨‹å\n      let courses = \"\
          æ— è¯¾ç¨‹ä¿¡æ¯\";\n      if (item.course_names) {\n          if (Array.isArray(item.course_names))\
          \ {\n              courses = item.course_names.join(\", \");\n         \
          \ } else {\n              courses = String(item.course_names);\n       \
          \   }\n      }\n      \n      // æå–æ—¥æœŸ\n      let date = item.date || \"\
          æœªçŸ¥æ—¥æœŸ\";\n\n      return `${index + 1}. ${date} [${courses}]`;\n  });\n\n\
          \  const display_text = displayTextArr.length > 0 ? displayTextArr.join('\\\
          n') : \"æœªæŸ¥è¯¢åˆ°å¾€æœŸå‘¨æŠ¥\";\n\n  // 3. [å…³é”®ä¿®æ­£] ç”Ÿæˆä¾›æœºå™¨è¯»çš„ raw_list\n  // ç›´æ¥å­˜å‚¨å®Œæ•´çš„å¯¹è±¡åˆ—è¡¨ï¼Œä¸åˆ å‡ä»»ä½•å­—æ®µï¼\n\
          \  const raw_list = JSON.stringify(list);\n\n  return {\n    raw_list,\n\
          \    display_text\n  };\n}\n\nmodule.exports = main;"
        code_language: javascript
        outputs:
          display_text:
            children: null
            type: string
          raw_list:
            children: null
            type: string
        selected: false
        title: å¾€æœŸå‘¨æŠ¥æ¸…æ´—
        type: code
        variables:
        - value_selector:
          - '1764510324094'
          - body
          value_type: string
          variable: http_body
      height: 51
      id: '1764511080329'
      position:
        x: 4193.920068966316
        y: 35.14138797913756
      positionAbsolute:
        x: 4193.920068966316
        y: 35.14138797913756
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        items:
        - input_type: constant
          operation: set
          value: selecting_report_to_update
          variable_selector:
          - conversation
          - current_step
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '1764511080329'
          - raw_list
          variable_selector:
          - conversation
          - temp_report_list
          write_mode: over-write
        selected: false
        title: å˜é‡èµ‹å€¼ 10
        type: assigner
        version: '2'
      height: 109
      id: '1764511882046'
      position:
        x: 4495.920068966316
        y: 35.14138797913756
      positionAbsolute:
        x: 4495.920068966316
        y: 35.14138797913756
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        answer: '{{#1764511080329.display_text#}}

          ä»¥ä¸Šæ˜¯ä¸ºæ‚¨æŸ¥è¯¢åˆ°çš„å¾€æœŸå‘¨æŠ¥åˆ—è¡¨ï¼Œè¯·å›å¤æ•°å­—åºå·é€‰æ‹©è¦æ›´æ–°å“ªä¸€ä»½ã€‚'
        selected: false
        title: ç›´æ¥å›å¤ 8
        type: answer
        variables: []
      height: 134
      id: '1764512189067'
      position:
        x: 4797.920068966318
        y: 35.14138797913756
      positionAbsolute:
        x: 4797.920068966318
        y: 35.14138797913756
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        code: "function main(inputs) {\n  let reports = [];\n  \n  // 1. è§£æä¹‹å‰çš„åˆ—è¡¨æ•°æ®\n\
          \  try {\n    let raw = inputs.report_json;\n    if (typeof raw === 'string')\
          \ {\n        raw = JSON.parse(raw);\n    }\n    if (Array.isArray(raw))\
          \ {\n        reports = raw;\n    }\n  } catch(e) { return { status: \"FAIL\"\
          , display_content: \"è¯»å–åˆ—è¡¨å¤±è´¥\" }; }\n\n  // 2. è§£æç”¨æˆ·é€‰æ‹© (1 -> Index 0)\n  const\
          \ index = parseInt(inputs.user_input) - 1;\n\n  // 3. æå–æ•°æ®\n  if (!isNaN(index)\
          \ && index >= 0 && index < reports.length) {\n      const selected = reports[index];\n\
          \      \n      // æå–æ‰€æœ‰æ ¸å¿ƒå­—æ®µ (å…¼å®¹ä¸åŒå­—æ®µå)\n      const id = selected.week_id\
          \ || selected.id;\n      const week = selected.date;\n      const summary\
          \ = selected.summary || \"æ— æ€»ç»“å†…å®¹\";\n      const issues = selected.encountered_issues\
          \ || \"æ— é—®é¢˜è®°å½•\";\n      const solution = selected.solution || \"æ— è§£å†³æ–¹æ¡ˆ\";\n\
          \      const plan = selected.next_week_plan || \"æ— è®¡åˆ’å†…å®¹\";\n      \n    \
          \  // å¤„ç†è¯¾ç¨‹åæ˜¾ç¤º\n      let courseName = \"æœªçŸ¥è¯¾ç¨‹\";\n      if (Array.isArray(selected.course_names))\
          \ {\n          courseName = selected.course_names.join(\", \");\n      }\
          \ else if (selected.course_names) {\n          courseName = String(selected.course_names);\n\
          \      }\n\n      // 4. ç”Ÿæˆå®Œæ•´çš„â€œå›æ˜¾æ–‡æœ¬â€\n      const display = `\U0001F4C5 **å‘¨æœŸ**:\
          \ ${week}\\n\U0001F4DA **è¯¾ç¨‹**: ${courseName}\\n\\n\U0001F4DD **æ€»ç»“**: ${summary}\\\
          n\\nâš ï¸ **é—®é¢˜**: ${issues}\\n\\nâœ… **è§£å†³**: ${solution}\\n\\n\U0001F52E **è®¡åˆ’**:\
          \ ${plan}`;\n\n      return {\n          status: \"SUCCESS\",\n        \
          \  target_report_id: String(id), \n          target_week: week,\n      \
          \    old_summary: summary,\n          old_issues: issues,      // [æ–°å¢]\n\
          \          old_solution: solution,  // [æ–°å¢]\n          old_plan: plan, \
          \         // [æ–°å¢]\n          display_content: display \n      };\n  }\n\n\
          \  return { \n      status: \"FAIL\", \n      target_report_id: \"\", target_week:\
          \ \"\", old_summary: \"\", old_issues: \"\", old_solution: \"\", old_plan:\
          \ \"\", display_content: \"é€‰æ‹©æ— æ•ˆï¼Œè¯·æ£€æŸ¥åºå·ã€‚\" \n  };\n}\nmodule.exports = main;"
        code_language: javascript
        outputs:
          display_content:
            children: null
            type: string
          old_issues:
            children: null
            type: string
          old_plan:
            children: null
            type: string
          old_solution:
            children: null
            type: string
          old_summary:
            children: null
            type: string
          status:
            children: null
            type: string
          target_report_id:
            children: null
            type: string
          target_week:
            children: null
            type: string
        selected: false
        title: ä»£ç æ‰§è¡Œ (é”å®šå‘¨æŠ¥ & å›æ˜¾)
        type: code
        variables:
        - value_selector:
          - sys
          - query
          value_type: string
          variable: user_input
        - value_selector:
          - conversation
          - temp_report_list
          value_type: string
          variable: report_json
      height: 51
      id: '1764513411691'
      position:
        x: 1936.7785783879465
        y: 585.217736539627
      positionAbsolute:
        x: 1936.7785783879465
        y: 585.217736539627
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        items:
        - input_type: constant
          operation: set
          value: waiting_for_update_content
          variable_selector:
          - conversation
          - current_step
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '1764513411691'
          - target_report_id
          variable_selector:
          - conversation
          - target_report_id
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '1764513411691'
          - old_summary
          variable_selector:
          - conversation
          - old_summary
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '1764513411691'
          - target_week
          variable_selector:
          - conversation
          - target_week
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '1764513411691'
          - old_issues
          variable_selector:
          - conversation
          - old_issues
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '1764513411691'
          - old_solution
          variable_selector:
          - conversation
          - old_solution
          write_mode: over-write
        - input_type: variable
          operation: over-write
          value:
          - '1764513411691'
          - old_plan
          variable_selector:
          - conversation
          - old_plan
          write_mode: over-write
        selected: false
        title: ä¿®æ”¹å†…å®¹ç¯å¢ƒï¼Œç»™6å¤§å˜é‡èµ‹å€¼
        type: assigner
        version: '2'
      height: 239
      id: '1764513719414'
      position:
        x: 2254.861275083997
        y: 585.217736539627
      positionAbsolute:
        x: 2254.861275083997
        y: 585.217736539627
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        answer: 'å·²é”å®šè¯¥å‘¨æŠ¥ï¼ŒåŸå§‹å†…å®¹å¦‚ä¸‹ï¼š{{#1764513411691.display_content#}}

          è¯·å‘Šè¯‰æˆ‘æ‚¨æƒ³ä¿®æ”¹æˆ–è¡¥å……ä»€ä¹ˆå†…å®¹ï¼Ÿ (æ‚¨å¯ä»¥ç›´æ¥è¯´â€œæŠŠJavaæ”¹æˆPythonâ€ï¼Œæˆ–è€…â€œåœ¨æ€»ç»“é‡Œè¡¥å……ä¸€ç‚¹Væ¨¡å‹çš„å†…å®¹â€)'
        selected: false
        title: ä¿®æ”¹æˆ–è¡¥å……å›å¤
        type: answer
        variables: []
      height: 166
      id: '1764514840061'
      position:
        x: 2598.470299827489
        y: 585.217736539627
      positionAbsolute:
        x: 2598.470299827489
        y: 585.217736539627
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        items:
        - input_type: variable
          operation: over-write
          value:
          - sys
          - query
          variable_selector:
          - conversation
          - user_content
          write_mode: over-write
        - input_type: constant
          operation: set
          value: normal
          variable_selector:
          - conversation
          - current_step
          write_mode: over-write
        selected: false
        title: æ”¹ä¸ºå¹³å¸¸ç¯å¢ƒï¼Œèµ‹å€¼å­¦ä¹ å†…å®¹
        type: assigner
        version: '2'
      height: 109
      id: '1764516486086'
      position:
        x: 1936.7785783879465
        y: 1089.3158548020633
      positionAbsolute:
        x: 1936.7785783879465
        y: 1089.3158548020633
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        context:
          enabled: false
          variable_selector: []
        model:
          completion_params: {}
          mode: chat
          name: qwen3-max
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: 598541c0-4ff2-472e-bade-515ea581efb8
          role: system
          text: "ä½ æ˜¯ä¸€ä¸ªå‘¨æŠ¥å†…å®¹èåˆåŠ©æ‰‹ã€‚\nä½ çš„ä»»åŠ¡æ˜¯ï¼šæ ¹æ®ç”¨æˆ·çš„ä¿®æ”¹æŒ‡ä»¤ï¼Œæ›´æ–°æ—§çš„å‘¨æŠ¥å†…å®¹ï¼Œå¹¶è¾“å‡ºä¸€ä¸ªæ ‡å‡†çš„ JSON å­—ç¬¦ä¸²ã€‚\n\n###\
            \ è¾“å…¥æ•°æ®ï¼š\n1. **æ—§å‘¨æŠ¥**:\n   - [Summary]: {{#conversation.old_summary#}}\n\
            \   - [Issues]: {{#conversation.old_issues#}}\n   - [Solution]: {{#conversation.old_solution#}}\n\
            \   - [Plan]: {{#conversation.old_plan#}}\n2. **ç”¨æˆ·æŒ‡ä»¤**: \"{{#conversation.user_content#}}\"\
            \n\n### æ‰§è¡Œé€»è¾‘ï¼š\n1. åˆ†æç”¨æˆ·çš„éœ€æ±‚æ˜¯é’ˆå¯¹å“ªä¸ªæ¿å—ï¼ˆæ€»ç»“ã€é—®é¢˜ã€è®¡åˆ’ï¼‰çš„ä¿®æ”¹ï¼Œè¿˜æ˜¯å…¨å±€è¡¥å……ã€‚\n2. å°†æ–°å†…å®¹è‡ªç„¶åœ°èå…¥åˆ°æ—§å†…å®¹ä¸­ï¼Œä¿æŒè¯­æ°”çš„è¿è´¯æ€§ã€‚\n\
            3. å¦‚æœç”¨æˆ·åªæåˆ°äº†æŸä¸ªæ¿å—ï¼Œå…¶ä»–æ¿å—è¯·ä¿æŒåŸæ ·ã€‚\n\n### â›”ï¸ ç»å¯¹è¾“å‡ºè§„åˆ™:\n1. **ä½ å¿…é¡»ä¸”åªèƒ½è¾“å‡ºä¸€æ®µçº¯ JSON ä»£ç **ã€‚\n\
            2. **ä¸è¦**è¾“å‡º Markdown ä»£ç å—æ ‡è®°ï¼ˆå¦‚ ```json ... ```ï¼‰ã€‚\n3. **ä¸è¦**åœ¨ JSON å‰åè¯´ä»»ä½•åºŸè¯ã€‚\n\
            4. JSON å¿…é¡»åŒ…å«ä»¥ä¸‹ 4 ä¸ªå­—æ®µï¼š\n   - \"summary\"\n   - \"encountered_issues\"\n\
            \   - \"solution\"\n   - \"next_week_plan\""
        - id: e61becf2-cd92-4ed4-975e-725cb9e6d96f
          role: user
          text: è¯·è¾“å‡ºä¿®æ”¹åçš„å®Œæ•´ JSONã€‚
        selected: false
        structured_output:
          schema:
            additionalProperties: false
            properties:
              encountered_issues:
                description: æœ¬å‘¨é—®é¢˜
                type: string
              next_week_plan:
                description: ä¸‹å‘¨è®¡åˆ’
                type: string
              solution:
                description: è§£å†³æ–¹æ¡ˆ
                type: string
              summary:
                description: æœ¬å‘¨æ€»ç»“
                type: string
            required: []
            type: object
        structured_output_enabled: false
        title: æ™ºèƒ½èåˆllmèŠ‚ç‚¹
        type: llm
        vision:
          enabled: false
      height: 87
      id: '1764516876254'
      position:
        x: 2238.8346356118504
        y: 1089.3158548020633
      positionAbsolute:
        x: 2238.8346356118504
        y: 1089.3158548020633
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-202
            key: ''
            type: text
            value: '{{#1764750231351.final_post_body#}}'
          type: json
        error_strategy: fail-branch
        headers: 'Cookie:{{#conversation.cookie#}}

          saas-slug:dykj:student

          Content-Type:application/json

          accept:application/json, text/plain, */*

          referer:https://saas.lanqiao.cn/

          origin:https://saas.lanqiao.cn

          accept-language:zh-CN,zh;q=0.9'
        method: put
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: å¾€æœŸå‘¨æŠ¥ä¸Šä¼ èŠ‚ç‚¹
        type: http-request
        url: https://opcenter.lanqiao.cn/api/v1/svc/sms/evaluation/student/myweeks/{{#conversation.target_report_id#}}/
        variables: []
      height: 208
      id: '1764517829108'
      position:
        x: 2932.7634446245893
        y: 1089.3158548020633
      positionAbsolute:
        x: 2932.7634446245893
        y: 1089.3158548020633
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        answer: å‘¨æŠ¥æ›´æ–°æˆåŠŸï¼ å·²æ ¹æ®æ‚¨çš„è¦æ±‚ï¼šâ€œ{{#conversation.user_content#}}â€ å®Œæˆäº†ä¿®æ”¹ã€‚
        selected: false
        title: ä¸Šä¼ æˆåŠŸå›å¤
        type: answer
        variables: []
      height: 119
      id: '1764518069509'
      position:
        x: 3255.5789652622125
        y: 1089.3158548020633
      positionAbsolute:
        x: 3255.5789652622125
        y: 1089.3158548020633
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        answer: 'âŒ æŠ±æ­‰ï¼Œå‘¨æŠ¥æ›´æ–°å¤±è´¥ã€‚

          ğŸ”§ é”™è¯¯è¯¦æƒ…ï¼š {{#1764517829108.error_message#}}

          (ç³»ç»Ÿæç¤ºï¼šå¦‚æœæ˜¾ç¤º 401 æˆ– 403ï¼Œé€šå¸¸æ„å‘³ç€ç™»å½•å·²è¿‡æœŸ)

          ğŸ’¡ å»ºè®®æ“ä½œï¼š

          æ‚¨çš„ç™»å½•å‡­è¯ (Cookie) å¯èƒ½å·²å¤±æ•ˆã€‚è¯·ç›´æ¥å›å¤æ‚¨çš„ è´¦å·å’Œå¯†ç  (æ ¼å¼ï¼šè´¦å· å¯†ç )ï¼Œæˆ‘ä¼šä¸ºæ‚¨é‡æ–°ç™»å½•ã€‚

          å¦‚æœç½‘ç»œä¸ç¨³å®šï¼Œè¯·ç¨åå†æ¬¡å°è¯•å‘é€â€œæ›´æ–°å‘¨æŠ¥â€ã€‚'
        selected: false
        title: ä¸Šä¼ å¤±è´¥å›å¤
        type: answer
        variables: []
      height: 246
      id: '1764518095133'
      position:
        x: 3255.5789652622125
        y: 1248.3158548020638
      positionAbsolute:
        x: 3255.5789652622125
        y: 1248.3158548020638
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        answer: 'ğŸ‘‹ æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„è“æ¡¥å‘¨æŠ¥åŠ©æ‰‹ã€‚


          æˆ‘çš„æ ¸å¿ƒæŠ€èƒ½æ˜¯å¸®æ‚¨ **å…¨è‡ªåŠ¨** å¤„ç†å‘¨æŠ¥ã€‚æˆ‘æ³¨æ„åˆ°æ‚¨ä¼¼ä¹åœ¨é—²èŠï¼Œå¦‚æœæ‚¨éœ€è¦æˆ‘çš„å¸®åŠ©ï¼Œè¯·ç›´æ¥ä¸‹è¾¾ä»¥ä¸‹æŒ‡ä»¤ï¼š


          ğŸš€ **æ–°å»ºå‘¨æŠ¥**

          ä¾‹å¦‚ï¼šâ€œæ–°å»ºå‘¨æŠ¥ï¼Œæˆ‘è¿™å‘¨å­¦äº† Java å¤šçº¿ç¨‹ã€‚â€

          *(æˆ‘ä¼šè‡ªåŠ¨ä¸ºæ‚¨åŒ¹é…è¯¾ç¨‹ã€ç”Ÿæˆå†…å®¹å¹¶æäº¤)*


          ğŸ”„ **æ›´æ–°å‘¨æŠ¥**

          ä¾‹å¦‚ï¼šâ€œæˆ‘è¦æ›´æ–°å‘¨æŠ¥â€

          *(æˆ‘ä¼šä¸ºæ‚¨åˆ—å‡ºæœ€è¿‘æäº¤çš„å‘¨æŠ¥ï¼Œä¾›æ‚¨é€‰æ‹©ä¿®æ”¹)*


          è¯·å‘Šè¯‰æˆ‘ï¼Œæ‚¨ç°åœ¨æƒ³åšä»€ä¹ˆï¼Ÿ'
        selected: false
        title: é—²èŠå›å¤
        type: answer
        variables: []
      height: 259
      id: '1764518620531'
      position:
        x: 3858.8037021398295
        y: 217.01830734619497
      positionAbsolute:
        x: 3858.8037021398295
        y: 217.01830734619497
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    - data:
        author: Ganyc
        desc: ''
        height: 457
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"font-size:
          12px;","text":"ã€å…¨å±€æ¨¡å¼åˆ†æ”¯ã€‘è´Ÿè´£æ ¹æ® current_step æ‹¦æˆªç”¨æˆ·è¾“å…¥ï¼Œåˆ†å‘åˆ°å¯¹åº”çš„å¤„ç†é€»è¾‘ã€‚ ","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"listitem","version":1,"textStyle":"font-size:
          12px;","value":1},{"children":[{"detail":0,"format":0,"mode":"normal","style":"font-size:
          12px;","text":"ğŸ”¹ CASE 1","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"listitem","version":1,"textStyle":"font-size:
          12px;","value":2},{"children":[{"detail":0,"format":0,"mode":"normal","style":"font-size:
          12px;","text":" (selecting_course): ç”¨æˆ·æ­£åœ¨é€‰å…³è”è¯¾ç¨‹ (å›\"1\") -> èµ°é€‰è¯¾é€»è¾‘ã€‚","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"listitem","version":1,"textStyle":"font-size:
          12px;","value":3},{"children":[{"detail":0,"format":0,"mode":"normal","style":"font-size:
          12px;","text":"ğŸ”¹ CASE 2","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"listitem","version":1,"textStyle":"font-size:
          12px;","value":4},{"children":[{"detail":0,"format":0,"mode":"normal","style":"font-size:
          12px;","text":"(waiting_for_content): ç”¨æˆ·æ­£åœ¨è¡¥å……æ–°å»ºå‘¨æŠ¥çš„å†…å®¹ (å›\"å­¦äº†Java\") -> èµ°å­˜å†…å®¹é€»è¾‘ã€‚
          ","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"listitem","version":1,"textStyle":"font-size:
          12px;","value":5},{"children":[{"detail":0,"format":0,"mode":"normal","style":"font-size:
          12px;","text":"ğŸ”¹ CASE 3","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"listitem","version":1,"textStyle":"font-size:
          12px;","value":6},{"children":[{"detail":0,"format":0,"mode":"normal","style":"font-size:
          12px;","text":" (selecting_week): ç”¨æˆ·æ­£åœ¨é€‰æ–°å»ºå“ªä¸€å‘¨ (å›\"1\") -> èµ°é€‰å‘¨é€»è¾‘ã€‚ ","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"listitem","version":1,"textStyle":"font-size:
          12px;","value":7},{"children":[{"detail":0,"format":0,"mode":"normal","style":"font-size:
          12px;","text":"ğŸ”¹ CASE 4 (selecting_report_to_update): ç”¨æˆ·æ­£åœ¨é€‰æ›´æ–°å“ªä»½å¾€æœŸå‘¨æŠ¥ (å›\"1\")
          -> èµ°é”å®šæ—§å‘¨æŠ¥é€»è¾‘ã€‚ ğŸ”¹ CASE 5 (waiting_for_update_content): ç”¨æˆ·æ­£åœ¨è¡¥å……æ›´æ–°å†…å®¹ (å›\"è¡¥å……Væ¨¡å‹\")
          -> èµ°å†…å®¹èåˆé€»è¾‘ã€‚ ğŸ”¸ ELSE (normal): æ­£å¸¸å¯¹è¯ -> èµ°æ„å›¾è¯†åˆ« LLMã€‚","type":"text","version":1}],"direction":null,"format":"","indent":0,"type":"listitem","version":1,"textStyle":"font-size:
          12px;","value":8}],"direction":null,"format":"","indent":0,"type":"list","version":1,"textStyle":"font-size:
          12px;","listType":"bullet","start":1,"tag":"ul"}],"direction":null,"format":"","indent":0,"type":"root","version":1,"textStyle":"font-size:
          12px;"}}'
        theme: blue
        title: ''
        type: ''
        width: 240
      height: 457
      id: '1764519647018'
      position:
        x: 639.9385744620831
        y: 245.02002845756354
      positionAbsolute:
        x: 639.9385744620831
        y: 245.02002845756354
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 240
    - data:
        code: "function main(inputs) {\n  // --- 1. ID æ¸…æ´—å‡½æ•° ---\n  function cleanID(input)\
          \ {\n      if (!input) return [];\n      let parsed = input;\n      try\
          \ { while (typeof parsed === 'string') parsed = JSON.parse(parsed); } catch(e){}\n\
          \      if (!parsed) return [];\n      let arr = Array.isArray(parsed) ?\
          \ parsed : [parsed];\n      return arr.map(i => parseInt(i)).filter(n =>\
          \ !isNaN(n));\n  }\n\n  // --- 2. æ–‡æœ¬æ¸…æ´—å‡½æ•° (ä¿®å¤ 422 æ ¸å¿ƒ) ---\n  // æ— è®º LLM ç»™çš„æ˜¯æ•°ç»„è¿˜æ˜¯å­—ç¬¦ä¸²ï¼Œéƒ½ç»Ÿç»Ÿè½¬æˆå­—ç¬¦ä¸²\n\
          \  function forceString(input) {\n      if (!input) return \"\";\n     \
          \ if (typeof input === 'string') return input;\n      if (Array.isArray(input))\
          \ return input.join('\\n'); // æ•°ç»„ç”¨æ¢è¡Œæ‹¼æ¥\n      return JSON.stringify(input);\
          \ // å…¶ä»–å¯¹è±¡è½¬å­—ç¬¦ä¸²\n  }\n\n  // --- 3. è§£æ LLM çš„å“åº” ---\n  let content = {};\n\
          \  try {\n    let text = inputs.llm_response || \"{}\";\n    // å»æ‰ markdown\
          \ æ ‡è®°\n    text = text.replace(/```json/g, \"\").replace(/```/g, \"\").trim();\n\
          \    content = JSON.parse(text);\n  } catch (e) {\n    // è§£æå¤±è´¥æ—¶çš„å…œåº•\n   \
          \ content = {};\n  }\n\n  // --- 4. ç»„è£…æœ€ç»ˆ Body ---\n  // è¿™é‡Œæˆ‘ä»¬ä»è§£æå‡ºæ¥çš„ content\
          \ å¯¹è±¡é‡Œå–å€¼ï¼Œè€Œä¸æ˜¯ç›´æ¥ä» inputs é‡Œå–\n  const payload = {\n    report_id: inputs.report_id,\n\
          \    week_detail: inputs.week,\n    \n    // å…³é”®ï¼šä» content å¯¹è±¡å–å€¼ï¼Œå¹¶å¼ºåˆ¶è½¬å­—ç¬¦ä¸²\n\
          \    summary: forceString(content.summary),\n    encountered_issues: forceString(content.encountered_issues),\n\
          \    solution: forceString(content.solution),\n    next_week_plan: forceString(content.next_week_plan),\n\
          \    \n    // å¤„ç† ID\n    bind_courses: cleanID(inputs.bind_str),\n    yk_course_ids:\
          \ cleanID(inputs.yk_str)\n  };\n\n  return {\n    final_post_body: JSON.stringify(payload)\n\
          \  };\n}\n\nmodule.exports = main;"
        code_language: javascript
        outputs:
          final_post_body:
            children: null
            type: string
        selected: false
        title: å„éƒ¨åˆ†æ¸…æ´—
        type: code
        variables:
        - value_selector:
          - '1764516876254'
          - text
          value_type: string
          variable: llm_response
        - value_selector:
          - conversation
          - target_report_id
          value_type: string
          variable: report_id
        - value_selector:
          - conversation
          - target_week
          value_type: string
          variable: week
      height: 51
      id: '1764750231351'
      position:
        x: 2598.470299827489
        y: 1089.3158548020633
      positionAbsolute:
        x: 2598.470299827489
        y: 1089.3158548020633
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 241
    viewport:
      x: -567.926351770976
      y: 498.23888107899194
      zoom: 0.3789291416276001
  rag_pipeline_variables: []
